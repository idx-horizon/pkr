{% include "_header.html" %}
{% include "_menubar.html" %}

<div class="container-fluid p-3 bg-dark text-white">

<H2>Runs</H2>
<H3>

</H3>
<form class="form-inline" action='/runs/{{ filter_str }}' method="POST" name="form" autocomplete="off">
	{% if data.run_count == data.runs | length %}
		<span class="badge badge-pill badge-success">
			All: {{ data.run_count }}
		</span>	

	{% else %}
	
		<span class="badge badge-pill badge-success">
			Showing {{ data.runs | length }} of {{ data.run_count }}
		</span>	
		<a href="/runs" class="btn btn-success">Clear filter</a>	
	{% endif %}

		<input class="form-inline" type="text" style="width:250px" autocomplete="off"
               autocapitalize="off"
               spellcheck="off"
               name="filter_str"
               placeholder="(filter by)"
               value="{{ filter }}"></input>


<button type="submit" class="btn btn-success" name="filter_btn" value="Filter">Filter</button>

</form>

<table class="table table-hover table-light table-striped">
    <thead class="thead-light text-left">
	<tr>
		<th onclick="sortTable(0)" width="40%">Run</th>
		<th onclick="sortTable(1)" width="15%">Date</th>
		<th onclick="sortTable(2)" width="15%">Time</th>
		<th onclick="sortTable(3)" width="10%">Age Grading</th>
		<th onclick="sortTable(4)" width="10%">No</th>
		<th onclick="sortTable(5)" width="10%">Pos</th>
	</tr>
	</thead>
	{% for item in data.runs %}
			<tr>
				<td><a class="text-decoration-none" href="/runs/{{ item['Event'] }}">{{ item['Event'] }}
				    <span class="badge badge-pill badge-success">{{ item['occurrences'] }}</span></a>
								</td>
				<td>{{ item['Run Date'] }}</td>
				<td
						{% if item['Time'] < threshold %} 
							id="hilite"
						{% endif %}>
						{% if item['PB?'] == 'PB' %}
						  {{ item['Time'] }}
						  <span class="badge badge-pill badge-success">PB</span> 
						{% else %}
  						  {{ item['Time'] }}
		  			    {% endif %}
					</td>
				<td>{{ item['AgeGrade'] }}</td>
				<td>{{ '%4s' % item['Run Number'] }}</td>
				<td>{{ '%4s' % item['Pos'] }}</td>
	{% endfor %}
		<P>

</table>{{ threshold }}
	<P>


<P>
Runner data as at {{ data.updated_dt }}<P>
</div>

{% include "_footer.html" %}
