{% include "_header.html" %}
{% include "_menubar.html" %}

<H1>{{ data|length }} events in {{ country|upper }} 
{% if request.form['filter_str']|length > 0 %}{{ filter_method }} "{{ request.form['filter_str'] }}"{% endif %}</H1>

<form action='/events/{{ country_code }}/{{ filter_str }}' method="POST" name="form">

        <span class="styled">
          <select name="filter_method">
            <option {% if request.form['filter_method']=='startswith' %}
                    selected
                    {% endif %}
                    value="startswith">Startswith
            </option>
            <option {% if request.form['filter_method']=='contains' %}
                    selected
                    {% endif %}
                    value="contains">Contains
            </option>
          </select>
        </span>
		<span class="styled">
 		<input type="text" autocomplete="off" autocapitalize="off" spellcheck="off" name="filter_str" placeholder="(filter by)" value="{{ request.form['filter_str'] }}"></input>
        </span>
        
		<span class="styled">
          <select name="country_code">
            {% for c in countries|sort %}
                <option {% if c==country %}selected{% endif %}
                  value={{ c }}>{{ c }}</option>
            {% endfor %}
          </select>
        </span>
        <span>
		<button type="submit" name="filter_btn" value="Filter">Filter</button>
		<span>
</form>
				
<div style="width:80%">
    <table id='table'>
            <tr>
                <th width="20%"  align="centre">#</th>
                <th width="80%" align="left">Name</th>
            </tr>
            {% for item in data|sort(attribute='evlongname') %}
                <tr>
                    <td align="center">{{ item.evid }}</td>
                    <td align="left"><a href="{{ item.url_latestresults }}">{{ item.evlongname }}</td>
                </tr>
            {% endfor %}
            <P>
    </table>
</div>
<P>
Events data as at {{ file_modified_date }}<P>
{% include "_footer.html" %}
